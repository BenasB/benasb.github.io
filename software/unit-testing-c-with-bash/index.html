<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1" name="viewport"><title>Unit testing C with Bash | Bx2 Blog</title><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/site.webmanifest" rel="manifest"><link href="/safari-pinned-tab.svg" rel="mask-icon" color="#5bbad5"><meta content="#da532c" name="msapplication-TileColor"><meta content="#ffffff" name="theme-color"><script defer src="/bundle.js"></script><link href="/main.d438f74637bdf6bf218c.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><meta content="Unit testing brings a lot of good things to your projects. Every developer should understand its value and see that it's really a must, as it helps to automate the testing process, track down bugs, analyse coverage and increase overall productivity." data-react-helmet="true" name="description"><meta content="Unit testing C with Bash | Bx2 Blog" data-react-helmet="true" property="og:title"><meta content="Unit testing brings a lot of good things to your projects. Every developer should understand its value and see that it's really a must, as it helps to automate the testing process, track down bugs, analyse coverage and increase overall productivity." data-react-helmet="true" property="og:description"><meta content="https://bx2.tech/og/blog/unit-testing-c-with-bash.png" data-react-helmet="true" property="og:image"><meta content="summary_large_image" data-react-helmet="true" name="twitter:card"><link href="https://fonts.gstatic.com" rel="preconnect"></head><body><div id="root"><header class="header-module__container___hcrqD"><div class="header-module__content___3V1Zo"><a href="/"><img alt="logo" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE2IiBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgMTE2IDQ4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMC4xMiA0OFYwLjgzMTk5N0gyNy4yNTZMMzQuMzYgNy45MzZWMTkuMDA4TDMxLjI4OCAyMi40NjRMMzYuNDcyIDI3LjU4NFY0MC44OTZMMjkuMzY4IDQ4SDAuMTJaTTguMTIgMTkuNzc2SDIzLjU0NEwyNi4yOTYgMTYuNTc2VjEwLjY4OEwyMy40OCA3Ljg3Mkg4LjEyVjE5Ljc3NlpNOC4xMiA0MC45NkgyNS41OTJMMjguNDA4IDM4LjE0NFYyOS42MzJMMjUuNTkyIDI2LjgxNkg4LjEyVjQwLjk2Wk00MC45NTI1IDQ4TDUyLjc5MjUgMzAuOTEyTDQwLjk1MjUgMTQuNTI4SDUwLjIzMjVMNTguOTM2NSAyNy4ySDYwLjQ3MjVMNjkuMTEyNSAxNC41MjhINzguMzkyNUw2Ni42MTY1IDMwLjg0OEw3OC4zOTI1IDQ4SDY4LjkyMDVMNjAuNDA4NSAzNC43NTJINTguODA4NUw1MC40ODg1IDQ4SDQwLjk1MjVaTTgzLjM1MDUgNDhWMzguMjA4TDEwNy40NzkgMTYuNDQ4VjEwLjY4OEwxMDQuNjYzIDcuODcySDkyLjgyMjVMODguMTUwNSAxMi41NDRMODIuOTAyNSA3LjIzMkw4OS4zMDI1IDAuODMxOTk3SDEwOC4zNzVMMTE1LjQ3OSA3LjkzNlYxOS43NzZMOTIuNDM4NSA0MC43MDRIMTE1LjkyN1Y0OEg4My4zNTA1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=="></a><nav class="header-module__navigation___-jWYh"><a href="/">Blog</a><a href="/me">Me</a></nav></div></header><div class="contentLayout-module__wrapper___1TkPM"><article><div class="postHeader-module__header___1BbX7"><div class="postHeader-module__topRow___3Sjrr"><a href="/software" class="postHeader-module__topic___22-qX"><img alt="left arrow" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgNDQzLjUyIDQ0My41MiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDQzLjUyIDQ0My41MjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0xNDMuNDkyLDIyMS44NjNMMzM2LjIyNiwyOS4xMjljNi42NjMtNi42NjQsNi42NjMtMTcuNDY4LDAtMjQuMTMyYy02LjY2NS02LjY2Mi0xNy40NjgtNi42NjItMjQuMTMyLDBsLTIwNC44LDIwNC44CgkJCWMtNi42NjIsNi42NjQtNi42NjIsMTcuNDY4LDAsMjQuMTMybDIwNC44LDIwNC44YzYuNzgsNi41NDgsMTcuNTg0LDYuMzYsMjQuMTMyLTAuNDJjNi4zODctNi42MTQsNi4zODctMTcuMDk5LDAtMjMuNzEyCgkJCUwxNDMuNDkyLDIyMS44NjN6Ii8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==" height="15" width="15"><h3>Software</h3></a><h3 class="postHeader-module__date___38uXN">2021-09-25</h3></div><h1>Unit testing C with Bash</h1></div><div class="post-module__content___2TE7E"><p class="post-module__p___pJZUm">Unit testing brings a lot of good things to your projects. Every developer should understand its value and see that it's really a must, as it helps to automate the testing process, track down bugs, analyse coverage and increase overall productivity.</p><a href="#why" class="postSectionHeader-module__link___3gkLa"><img alt="Go to why" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48ZyBmaWxsPSJub25lIj48cGF0aCBkPSJNMTMuNTQ0IDEwLjQ1NmE0LjM2OCA0LjM2OCAwIDAgMC02LjE3NiAwbC0zLjA4OSAzLjA4OGE0LjM2NyA0LjM2NyAwIDEgMCA2LjE3NyA2LjE3N0wxMiAxOC4xNzciIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xMC40NTYgMTMuNTQ0YTQuMzY4IDQuMzY4IDAgMCAwIDYuMTc2IDBsMy4wODktMy4wODhhNC4zNjcgNC4zNjcgMCAxIDAtNi4xNzctNi4xNzdMMTIgNS44MjMiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4=" class="postSectionHeader-module__icon___1JDVu" style="top:10px"><h2 id="why">Why</h2></a><p class="post-module__p___pJZUm">At university, I have a module called Procedural Programming where we are taught (as the module title suggests) basic procedural programming skills with C. As a part of our assessment, we have to write relatively simple programs that usually perform some sort of algorithms (you give data to the program and receive some type of a result from it). Testing those programs manually can be quite time consuming, especially if you want to test specific cases every time you change something. Unit testing was an obvious answer to this problem, so I decided to create a tool to help me achieve just that.</p><a href="#main-obstacles-to-overcome" class="postSectionHeader-module__link___3gkLa"><img alt="Go to main-obstacles-to-overcome" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48ZyBmaWxsPSJub25lIj48cGF0aCBkPSJNMTMuNTQ0IDEwLjQ1NmE0LjM2OCA0LjM2OCAwIDAgMC02LjE3NiAwbC0zLjA4OSAzLjA4OGE0LjM2NyA0LjM2NyAwIDEgMCA2LjE3NyA2LjE3N0wxMiAxOC4xNzciIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xMC40NTYgMTMuNTQ0YTQuMzY4IDQuMzY4IDAgMCAwIDYuMTc2IDBsMy4wODktMy4wODhhNC4zNjcgNC4zNjcgMCAxIDAtNi4xNzctNi4xNzdMMTIgNS44MjMiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4=" class="postSectionHeader-module__icon___1JDVu" style="top:10px"><h2 id="main-obstacles-to-overcome">Main obstacles to overcome</h2></a><p class="post-module__p___pJZUm">Although it doesn't sound very usual, I chose <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" class="post-module__link___3JDsk" rel="noopener noreferrer" target="_blank">Bash</a> to solve the issue as it's simple to use and doesn't depend on other tools.</p><p class="post-module__p___pJZUm">So the main process of manually running a simple C program can be split up into simple steps:</p><p></p><ol class="post-module__list___3c5Q4"><li class="post-module__li___2TyKt">Compile the file (I'm using <a href="https://gcc.gnu.org/" class="post-module__link___3JDsk" rel="noopener noreferrer" target="_blank">gcc</a> for that)</li><li class="post-module__li___2TyKt">Run the compiled file</li><li class="post-module__li___2TyKt">Manually enter input data</li><li class="post-module__li___2TyKt">Get output from the program</li></ol><p></p><p class="post-module__p___pJZUm">And we do that for each case we want to test. So ideally our tool should do the following:</p><p></p><ol class="post-module__list___3c5Q4"><li class="post-module__li___2TyKt">Compile the file</li><li class="post-module__li___2TyKt">For each case:<p></p><ol class="post-module__list___3c5Q4"><li class="post-module__li___2TyKt">Run the compiled file</li><li class="post-module__li___2TyKt">Automatically enter case input data</li><li class="post-module__li___2TyKt">Evaluate output from the program</li></ol><p></p></li></ol><p></p><p class="post-module__p___pJZUm">Knowing the needed steps, we can move on to defining the cases. So the question is - what makes up a test case? I came up with these properties:</p><p></p><ol class="post-module__list___3c5Q4"><li class="post-module__li___2TyKt">Title</li><li class="post-module__li___2TyKt">Input data</li><li class="post-module__li___2TyKt">Expected output data</li></ol><p></p><p class="post-module__p___pJZUm">Of course, there are multiple ways to describe and store test cases. Since the cases for my University exercises should be fairly simple, I chose to store all of the test cases in one <code class="post-module__code___Zc_tE">cases.txt</code> file and separate the properties with empty lines (as an alternative, you could store them in different files or even define the case object with different properties).</p><a href="#c-basher" class="postSectionHeader-module__link___3gkLa"><img alt="Go to c-basher" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48ZyBmaWxsPSJub25lIj48cGF0aCBkPSJNMTMuNTQ0IDEwLjQ1NmE0LjM2OCA0LjM2OCAwIDAgMC02LjE3NiAwbC0zLjA4OSAzLjA4OGE0LjM2NyA0LjM2NyAwIDEgMCA2LjE3NyA2LjE3N0wxMiAxOC4xNzciIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xMC40NTYgMTMuNTQ0YTQuMzY4IDQuMzY4IDAgMCAwIDYuMTc2IDBsMy4wODktMy4wODhhNC4zNjcgNC4zNjcgMCAxIDAtNi4xNzctNi4xNzdMMTIgNS44MjMiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4=" class="postSectionHeader-module__icon___1JDVu" style="top:10px"><h2 id="c-basher">c-basher</h2></a><p class="post-module__p___pJZUm">With all of the aforementioned ideas in mind, it was time to develop the actual tool. This is how <a href="https://github.com/BenasB/c-basher" class="post-module__link___3JDsk" rel="noopener noreferrer" target="_blank">c-basher</a> was created. In addition to the functionality mentioned above, I also added file and directory validation - for example, if <code class="post-module__code___Zc_tE">bin/</code> directory didn't exist, it would create it automatically and place the compiled file there. Also, you have to provide c-basher with a <code class="post-module__code___Zc_tE">.c</code> file, so logic to check if the provided file exists had to be added.</p><p class="post-module__p___pJZUm">Another problem with the University exercises I didn't mention earlier is that they usually require you to print user-friendly text to console. For example: "Please enter an integer:". This text must be ignored when evaluating the output from the program (because the output/result is basically everything that the program prints out). This led me to create a separate <code class="post-module__code___Zc_tE">ignore.txt</code> file that the user can populate with strings that should be ignored when evaluating the output.</p><p class="post-module__p___pJZUm">Read more about the tool in the <a href="https://github.com/BenasB/c-basher/blob/main/README.md" class="post-module__link___3JDsk" rel="noopener noreferrer" target="_blank">readme file</a>. Feel free to use it for your needs.</p></div></article></div></div></body></html>